@page "/"

<PageTitle>Home</PageTitle>

<TagCloud CurrentUser="_currentUser"/>
<MudDivider/>
<TopPicks CurrentUser="_currentUser"/>
<MudDivider/>
@if (_currentUser is null)
{
    <MudProgressCircular Class="d-flex justify-center align-center"/>
}
else
{
    <AuthorizeView>
        @*Need to change this component*@
        <MudButton
            StartIcon="@Icons.Material.Filled.Add"
            Variant="Variant.Filled"
            OnClick="NewTemplate"
            Color="Color.Primary"
            Class="my-4">
            Create
        </MudButton>
        
        <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
            <MudTabPanel Text="Templates">
                <TemplateList UserId="@_currentUser.Id"/>
            </MudTabPanel>
            <MudTabPanel Text="Forms">
                <FormList UserId="@_currentUser.Id"/>
            </MudTabPanel>
        </MudTabs>
        @*
        <MudButton Variant="Variant.Text"
                   Color="Color.Primary"
                   OnClick="() => _selectedComponent = (typeof(TemplateList))">
            Templates
        </MudButton>
        <MudButton Variant="Variant.Text"
                   Color="Color.Primary"
                   OnClick="() => _selectedComponent = (typeof(FormList))">
            Forms
        </MudButton>
        <DynamicComponent Type="_selectedComponent"
                          Parameters="@(new Dictionary<string, object>()
                                      {
                                          { "UserId", _currentUser.Id }
                                      })"/>
    *@
    </AuthorizeView>
}
